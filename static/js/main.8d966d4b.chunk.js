(this["webpackJsonpreact-new"]=this["webpackJsonpreact-new"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),s=n(9),a=n.n(s),i=n(3),o=n.n(i),u=n(1),l=n(12),d=n(6),j=n(7),b=n(10),f=n.n(b),h=n(0),p=function(e){var t=e.postData,n=(e.setPostData,e.newPostData),c=e.setNewPostData,r=e.currentId,s=e.setCurrentId,a=e.handleSubmit,i=e.editPost;return Object(h.jsxs)("div",{className:"add-form",children:[Object(h.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:function(e){e.preventDefault(),r?i(r):a()},children:Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("label",{children:"Title"}),Object(h.jsx)("input",{type:"text",placeholder:r?t.find((function(e){return e._id===r})).title:"Input Title...",value:n.title,onChange:function(e){return c(Object(u.a)(Object(u.a)({},n),{},{title:e.target.value}))}}),Object(h.jsx)("label",{children:"Message"}),Object(h.jsx)("input",{type:"text",placeholder:r?t.find((function(e){return e._id===r})).message:"Input Message...",value:n.message,onChange:function(e){return c(Object(u.a)(Object(u.a)({},n),{},{message:e.target.value}))}}),Object(h.jsx)("div",{children:Object(h.jsx)(f.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return c(Object(u.a)(Object(u.a)({},n),{},{selectedFile:t}))}})}),Object(h.jsx)("input",{type:"submit"})]})}),Object(h.jsx)("div",{children:r?Object(h.jsx)("button",{onClick:function(e){return s(null)},children:"Cancel Editing"}):Object(h.jsx)("p",{})})]})},O=n(11),m=n.n(O),x=function(e){var t=e.post,n=e.setCurrentId,c=e.deletePost;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:[t.title," | "," ",Object(h.jsx)("button",{onClick:function(e){return n(t._id)},children:"Edit"}),Object(h.jsx)("button",{onClick:function(e){return c(t._id)},children:"Delete"})]}),Object(h.jsx)("img",{src:t.selectedFile,height:"150",width:"auto",alt:"This is just title and description"}),Object(h.jsx)("h3",{children:t.message}),Object(h.jsxs)("p",{children:["Created at ",m()(t.createdAt).fromNow()]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]})},g=function(e){var t=e.postData,n=e.setCurrentId,c=e.deletePost;return t.length?Object(h.jsx)("div",{children:t.map((function(e){return Object(h.jsx)(x,{post:e,setCurrentId:n,deletePost:c},e._id)}))}):Object(h.jsx)("h3",{children:"There is no post"})},v=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({title:"",message:"",selectedFile:""}),a=Object(j.a)(s,2),i=a[0],b=a[1],f=Object(c.useState)(null),O=Object(j.a)(f,2),m=O[0],x=O[1],v="https://bagusgallery.herokuapp.com/posts";Object(c.useEffect)((function(){fetch(v).then((function(e){return e.json()})).then((function(e){return r(e)})).catch((function(e){return console.error("The error is",e)}))}),[]);var C=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.title,message:i.message,selectedFile:i.selectedFile})}).then((function(e){return e.json()})).then(console.log("Added ".concat(i)));case 2:t=e.sent,r([].concat(Object(l.a)(n),[t])),b(Object(u.a)(Object(u.a)({},i),{},{title:"",message:"",selectedFile:""}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.title?i.title:n.find((function(e){return e._id===t})).title,message:i.message?i.message:n.find((function(e){return e._id===t})).message,selectedFile:i.selectedFile?i.selectedFile:n.find((function(e){return e._id===t})).selectedFile})}).then((function(e){return e.json()})).then(console.log("Edited ".concat(i)));case 2:c=e.sent,r(n.map((function(e){return e._id===t?c:e}))),b(Object(u.a)(Object(u.a)({},i),{},{title:"",message:"",selectedFile:""})),x(null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:r(n.filter((function(e){return e._id!==t})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{postData:n,setPostData:r,newPostData:i,setNewPostData:b,currentId:m,setCurrentId:x,handleSubmit:C,editPost:w}),Object(h.jsx)(g,{postData:n,setCurrentId:x,deletePost:y})]})};n(20);a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.8d966d4b.chunk.js.map